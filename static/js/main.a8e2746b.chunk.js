(this["webpackJsonpupload-roster-contacts"]=this["webpackJsonpupload-roster-contacts"]||[]).push([[0],{13:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(3),o=n.n(r),c=(n(13),n(4)),s=n(5),l=n(8),d=n(7),u=n(6),p=n.n(u),h=n(0),m=n(17),v=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onFileUploadHandler=function(e){var t=e.target.files[0];a.validateFile(t)},a.state={apiResponse:"",fileValidity:!0,contactCount:0},a}return Object(s.a)(n,[{key:"validateFile",value:function(e){var t=this;if("text/csv"===e.type){var n=this;m.parse(e,{worker:!0,step:function(t,a){p.a.isEqual(["First Name","Last Name","Email","Sex"],t.data)?n.parseCSV(e):n.setState({fileValidity:!1},(function(){n.renderFileTypeError()})),a.abort()}})}else this.setState({fileValidity:!1},(function(){t.renderFileTypeError()}))}},{key:"renderFileTypeError",value:function(){var e=document.getElementById("main"),t=document.createElement("div");t.setAttribute("id","error-container");var n=document.createElement("p");n.innerHTML="Error: File must be in the CSV format and follow the correct template with these header rows: 'First Name', 'Last Name', 'Email', 'Sex'.",e.appendChild(t),t.appendChild(n)}},{key:"renderContactCounter",value:function(){var e=document.getElementById("main"),t=document.createElement("div");t.setAttribute("id","counter-container");var n=document.createElement("p");n.innerHTML="Success: ".concat(this.state.contactCount," contacts created in OnCall"),e.appendChild(t),t.appendChild(n)}},{key:"clearMessages",value:function(){var e=document.getElementById("main"),t=document.getElementById("error-container"),n=document.getElementById("counter-container");null!==t&&e.removeChild(t),null!==n&&e.removeChild(n)}},{key:"parseCSV",value:function(e){var t=this;m.parse(e,{worker:!0,step:function(e){if("First Name"!==e.data[0]){var n={};n.first_name=e.data[0],n.last_name=e.data[1],n.email=e.data[2],n.sex=e.data[3],n.division="https://api.oncallhealth.ca/divisions/2404/",n.provider="https://api.oncallhealth.ca/providers/196157/";var a=JSON.stringify(n);t.createRosterContact(a)}}})}},{key:"createRosterContact",value:function(e){var t=this;fetch("http://localhost:3000/post-new-contact/",{method:"POST",headers:{"Content-Type":"application/json"},body:e}).then((function(e){t.clearMessages(),201===e.status&&t.setState({contactCount:t.state.contactCount+1},(function(){t.renderContactCounter()}))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{id:"main",children:[Object(h.jsx)("h1",{children:"Bulk Roster Contact Uploader"}),Object(h.jsx)("input",{id:"file-upload-input",type:"file",name:"file",accept:".csv",onChange:this.onFileUploadHandler})]}),Object(h.jsx)("p",{children:this.state.apiResponse})]})}}]),n}(a.Component),f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),r(e),o(e)}))};o.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root")),f()}},[[18,1,2]]]);
//# sourceMappingURL=main.a8e2746b.chunk.js.map